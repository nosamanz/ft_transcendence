{"ast":null,"code":"var _jsxFileName = \"/home/oozcan/Desktop/6ekim/react/src/pages/Home.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\n// import { cookies } from \"../App\";\nimport io from \"socket.io-client\";\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const socket = io('http://localhost:80', {\n  transports: ['websocket']\n});\nconst Home = ({\n  setUser\n}) => {\n  _s();\n  const user = setUser;\n  const [loaded, setLoaded] = useState(false);\n  const [selectedImage, setSelectesImage] = useState(\"\");\n  const fileInput = document.getElementById('fileInput');\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    // setFormData({ ...formData, [name]:value});\n  };\n\n  const [reader, setReader] = useState();\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    setReader({\n      reader: reader\n    });\n    console.log(\"filto: \", e.target.files[0]);\n    if (file) {\n      setSelectesImage(URL.createObjectURL(file));\n      // console.log(\"I'm here\");\n      // formData.append('file', file);\n    } else {\n      setSelectesImage(\"\");\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      // const response = await fetch('http://10.12.13.2:80/user/getForm', {\n      // \tmethod: 'POST',\n      // \theaders: {\n      // \t\t'Content-Type': 'application/json',\n      // \t},\n      // \tbody: JSON.stringify(formData),\n      // });\n      // console.log(\": \" +formData.image);\n      const formData = new FormData();\n      console.log(\"File--- \" + (reader === null || reader === void 0 ? void 0 : reader.reader.result));\n      formData.append('file', reader === null || reader === void 0 ? void 0 : reader.reader.result);\n      const responseImage = await fetch('http://10.12.14.1:80/avatar/upload', {\n        method: 'POST',\n        headers: {\n          'authorization': 'Bearer ' + Cookies.get(\"jwt_authorization\")\n          // 'authorization': 'Bearer ' + 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjk4OTU5LCJpYXQiOjEzMzM0MTUwODc2fQ.nQc9al-VV2z-w9oYNrG7_6KgMqQUcfy3yqqLq9fdR28',\n        },\n\n        body: formData\n      });\n      if (responseImage.ok) {\n        console.log('Image submitted successfully');\n      } else {\n        console.error('Image submission failed');\n      }\n      // if (response.ok){\n      // \tconsole.log('Form submitted successfully');\n      // }\n      // else{\n      // \tconsole.error('Form submission failed');\n      // }\n    } catch (error) {\n      console.error('An error occurred:', error);\n    }\n  };\n  const handleClick = event => {\n    setLoaded(true);\n    event.preventDefault();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: loaded ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"containerHome\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formHeader\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"homeForm\",\n          children: \"Nickname ve Resim Se\\xE7in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formBody\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"formDiv\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Nickname: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"name\",\n              placeholder: user,\n              onChange: handleChange,\n              className: \"formInput\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"formDiv\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"fileInput\",\n              type: \"file\",\n              name: \"image\",\n              accept: \"images/*\",\n              onChange: handleImageChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Se\\xE7ilen Resim\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: selectedImage,\n              alt: \"\",\n              className: \"formImage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            onClick: handleSubmit,\n            children: \"G\\xF6nder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"PmFylKkb5D938NmvEekErVyvgaQ=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","io","Cookies","jsxDEV","_jsxDEV","socket","transports","Home","setUser","_s","user","loaded","setLoaded","selectedImage","setSelectesImage","fileInput","document","getElementById","handleChange","e","name","value","target","reader","setReader","handleImageChange","file","files","FileReader","readAsDataURL","console","log","URL","createObjectURL","handleSubmit","preventDefault","formData","FormData","result","append","responseImage","fetch","method","headers","get","body","ok","error","handleClick","event","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","id","accept","src","alt","onClick","_c","$RefreshReg$"],"sources":["/home/oozcan/Desktop/6ekim/react/src/pages/Home.tsx"],"sourcesContent":["import React, {useState, useEffect, Component} from \"react\";\n// import { cookies } from \"../App\";\nimport io from \"socket.io-client\";\nimport Cookies from 'js-cookie';\n\nexport const socket = io('http://localhost:80', {\n\ttransports: ['websocket']\n});\n\nconst Home = ({setUser}) =>{\n\tconst user = setUser;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [selectedImage, setSelectesImage] = useState(\"\");\n\tconst fileInput = document.getElementById('fileInput');\n\tconst handleChange = (e: React.ChangeEvent<HTMLInputElement>) =>{\n\t\tconst {name, value} = e.target;\n\t\t// setFormData({ ...formData, [name]:value});\n\t};\n\tconst [reader, setReader] = useState<{reader: any}>();\n\tconst handleImageChange = (e) =>{\n\t\tconst file = e.target.files[0];\n\n\t\tconst reader = new FileReader();\n\t\treader.readAsDataURL(file);\n\t\tsetReader({reader: reader});\n\t\tconsole.log(\"filto: \", e.target.files[0])\n\t\tif (file){\n\t\t\tsetSelectesImage(URL.createObjectURL(file));\n\t\t\t// console.log(\"I'm here\");\n\t\t\t// formData.append('file', file);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetSelectesImage(\"\");\n\t\t}\n\t}\n\tconst handleSubmit = async (e: React.FormEvent) =>{\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\t// const response = await fetch('http://10.12.13.2:80/user/getForm', {\n\t\t\t// \tmethod: 'POST',\n\t\t\t// \theaders: {\n\t\t\t// \t\t'Content-Type': 'application/json',\n\t\t\t// \t},\n\t\t\t// \tbody: JSON.stringify(formData),\n\t\t\t// });\n\t\t\t// console.log(\": \" +formData.image);\n\t\t\tconst formData = new FormData();\n\t\t\tconsole.log(\"File--- \"+ reader?.reader.result)\n\t\t\tformData.append('file', reader?.reader.result);\n\t\t\tconst responseImage = await fetch('http://10.12.14.1:80/avatar/upload', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'authorization': 'Bearer ' + Cookies.get(\"jwt_authorization\"),\n\t\t\t\t\t// 'authorization': 'Bearer ' + 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjk4OTU5LCJpYXQiOjEzMzM0MTUwODc2fQ.nQc9al-VV2z-w9oYNrG7_6KgMqQUcfy3yqqLq9fdR28',\n\t\t\t\t},\n\t\t\t\tbody: formData,\n\t\t\t});\n\n\t\t\tif (responseImage.ok){\n\t\t\t\tconsole.log('Image submitted successfully');\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconsole.error('Image submission failed');\n\t\t\t}\n\t\t\t// if (response.ok){\n\t\t\t\t// \tconsole.log('Form submitted successfully');\n\t\t\t\t// }\n\t\t\t\t// else{\n\t\t\t\t\t// \tconsole.error('Form submission failed');\n\t\t\t\t\t// }\n\t\t\t\t}catch(error){\n\t\t\t\t\tconsole.error('An error occurred:', error);\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tconst handleClick = (event) =>{\n\t\t\t\tsetLoaded(true);\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn(\n\t\t\t\t<div className=\"home\">\n\t\t{\n\t\t\tloaded ? (\n\t\t\t\t<div className=\"containerHome\">\n\t\t\t\t</div>\n\t\t\t)\n\t\t\t:\n\t\t\t(\n\t\t\t\t<div className=\"form\">\n\t\t\t\t\t<div className=\"formHeader\">\n\t\t\t\t\t\t<h2 className=\"homeForm\">Nickname ve Resim Seçin</h2>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"formBody\">\n\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t<div className=\"formDiv\">\n\t\t\t\t\t\t\t\t<label>Nickname: </label>\n\t\t\t\t\t\t\t<input type=\"text\" name=\"name\" placeholder={user} onChange={handleChange} className=\"formInput\"></input>\n\t\t\t\t\t\t\t</div><div className=\"formDiv\">\n\t\t\t\t\t\t\t\t<label></label>\n\t\t\t\t\t\t\t<input id = \"fileInput\" type=\"file\" name=\"image\" accept=\"images/*\" onChange={handleImageChange}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3>Seçilen Resim</h3>\n\t\t\t\t\t\t\t<img src= {selectedImage} alt=\"\" className=\"formImage\"></img>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button type=\"submit\" onClick={handleSubmit}>Gönder</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t\t</div>\n\n\t)\n}\n\nexport default Home;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,QAAQ,QAA6B,OAAO;AAC3D;AACA,OAAOC,EAAE,MAAM,kBAAkB;AACjC,OAAOC,OAAO,MAAM,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,OAAO,MAAMC,MAAM,GAAGJ,EAAE,CAAC,qBAAqB,EAAE;EAC/CK,UAAU,EAAE,CAAC,WAAW;AACzB,CAAC,CAAC;AAEF,MAAMC,IAAI,GAAGA,CAAC;EAACC;AAAO,CAAC,KAAI;EAAAC,EAAA;EAC1B,MAAMC,IAAI,GAAGF,OAAO;EACpB,MAAM,CAACG,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACa,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAMe,SAAS,GAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;EACtD,MAAMC,YAAY,GAAIC,CAAsC,IAAI;IAC/D,MAAM;MAACC,IAAI;MAAEC;IAAK,CAAC,GAAGF,CAAC,CAACG,MAAM;IAC9B;EACD,CAAC;;EACD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGxB,QAAQ,CAAgB,CAAC;EACrD,MAAMyB,iBAAiB,GAAIN,CAAC,IAAI;IAC/B,MAAMO,IAAI,GAAGP,CAAC,CAACG,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC;IAE9B,MAAMJ,MAAM,GAAG,IAAIK,UAAU,CAAC,CAAC;IAC/BL,MAAM,CAACM,aAAa,CAACH,IAAI,CAAC;IAC1BF,SAAS,CAAC;MAACD,MAAM,EAAEA;IAAM,CAAC,CAAC;IAC3BO,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEZ,CAAC,CAACG,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC;IACzC,IAAID,IAAI,EAAC;MACRZ,gBAAgB,CAACkB,GAAG,CAACC,eAAe,CAACP,IAAI,CAAC,CAAC;MAC3C;MACA;IACD,CAAC,MAED;MACCZ,gBAAgB,CAAC,EAAE,CAAC;IACrB;EACD,CAAC;EACD,MAAMoB,YAAY,GAAG,MAAOf,CAAkB,IAAI;IACjDA,CAAC,CAACgB,cAAc,CAAC,CAAC;IAElB,IAAG;MACF;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BP,OAAO,CAACC,GAAG,CAAC,UAAU,IAAER,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEA,MAAM,CAACe,MAAM,EAAC;MAC9CF,QAAQ,CAACG,MAAM,CAAC,MAAM,EAAEhB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEA,MAAM,CAACe,MAAM,CAAC;MAC9C,MAAME,aAAa,GAAG,MAAMC,KAAK,CAAC,oCAAoC,EAAE;QACvEC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACR,eAAe,EAAE,SAAS,GAAGzC,OAAO,CAAC0C,GAAG,CAAC,mBAAmB;UAC5D;QACD,CAAC;;QACDC,IAAI,EAAET;MACP,CAAC,CAAC;MAEF,IAAII,aAAa,CAACM,EAAE,EAAC;QACpBhB,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC5C,CAAC,MACG;QACHD,OAAO,CAACiB,KAAK,CAAC,yBAAyB,CAAC;MACzC;MACA;MACC;MACA;MACA;MACC;MACA;IACD,CAAC,QAAMA,KAAK,EAAC;MACZjB,OAAO,CAACiB,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC3C;EACD,CAAC;EAED,MAAMC,WAAW,GAAIC,KAAK,IAAI;IAC7BrC,SAAS,CAAC,IAAI,CAAC;IACfqC,KAAK,CAACd,cAAc,CAAC,CAAC;EACvB,CAAC;EACD,oBACC/B,OAAA;IAAK8C,SAAS,EAAC,MAAM;IAAAC,QAAA,EAEtBxC,MAAM,gBACLP,OAAA;MAAK8C,SAAS,EAAC;IAAe;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzB,CAAC,gBAINnD,OAAA;MAAK8C,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACpB/C,OAAA;QAAK8C,SAAS,EAAC,YAAY;QAAAC,QAAA,eAC1B/C,OAAA;UAAI8C,SAAS,EAAC,UAAU;UAAAC,QAAA,EAAC;QAAuB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjD,CAAC,eACNnD,OAAA;QAAK8C,SAAS,EAAC,UAAU;QAAAC,QAAA,eACxB/C,OAAA;UAAA+C,QAAA,gBACC/C,OAAA;YAAK8C,SAAS,EAAC,SAAS;YAAAC,QAAA,gBACvB/C,OAAA;cAAA+C,QAAA,EAAO;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC1BnD,OAAA;cAAOoD,IAAI,EAAC,MAAM;cAACpC,IAAI,EAAC,MAAM;cAACqC,WAAW,EAAE/C,IAAK;cAACgD,QAAQ,EAAExC,YAAa;cAACgC,SAAS,EAAC;YAAW;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnG,CAAC,eAAAnD,OAAA;YAAK8C,SAAS,EAAC,SAAS;YAAAC,QAAA,gBAC7B/C,OAAA;cAAAgD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAc,CAAC,eAChBnD,OAAA;cAAOuD,EAAE,EAAG,WAAW;cAACH,IAAI,EAAC,MAAM;cAACpC,IAAI,EAAC,OAAO;cAACwC,MAAM,EAAC,UAAU;cAACF,QAAQ,EAAEjC;YAAkB;cAAA2B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5F,CAAC,eACNnD,OAAA;YAAA+C,QAAA,gBACA/C,OAAA;cAAA+C,QAAA,EAAI;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACtBnD,OAAA;cAAKyD,GAAG,EAAGhD,aAAc;cAACiD,GAAG,EAAC,EAAE;cAACZ,SAAS,EAAC;YAAW;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxD,CAAC,eACNnD,OAAA;YAAQoD,IAAI,EAAC,QAAQ;YAACO,OAAO,EAAE7B,YAAa;YAAAiB,QAAA,EAAC;UAAM;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF;EACL;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEG,CAAC;AAGR,CAAC;AAAA9C,EAAA,CA3GKF,IAAI;AAAAyD,EAAA,GAAJzD,IAAI;AA6GV,eAAeA,IAAI;AAAC,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}